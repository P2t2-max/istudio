<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iStudio: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è!</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background: #FFFFFF;
            color: #1F2937;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
            min-height: 100vh;
            overflow-x: hidden;
        }
        header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(45deg, #FFF1F8, #FFE4E1);
            color: #1F2937;
            border-radius: 15px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(255,105,180,0.1) 0%, transparent 70%);
            opacity: 0.5;
        }
        h1 {
            font-size: 2.5em;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
            margin: 0;
            position: relative;
            z-index: 1;
            background: linear-gradient(to right, #FF69B4, #EC4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        h2 {
            color: #FF69B4;
            font-weight: 600;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        section {
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border: 1px solid #FFE4E1;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        section:hover {
            transform: translateY(-3px);
        }
        .task, .prize {
            margin: 15px 0;
            padding: 15px;
            background: #F9FAFB;
            border-radius: 10px;
            color: #1F2937;
            font-weight: 500;
            transition: background 0.3s ease;
        }
        .task:hover, .prize:hover {
            background: #FFF1F8;
        }
        button {
            background: linear-gradient(45deg, #FF69B4, #EC4899);
            color: #FFFFFF;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.3s ease;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.1);
        }
        button:hover {
            background: linear-gradient(45deg, #EC4899, #DB2777);
            transform: scale(1.03);
            box-shadow: 0 5px 12px rgba(0, 0, 0, 0.15);
        }
        input[type="file"] {
            display: none;
        }
        .level {
            display: none;
        }
        .show {
            display: block;
        }
        #refLink {
            color: #EC4899;
            font-weight: 600;
            text-decoration: underline;
            transition: color 0.3s ease;
        }
        #refLink:hover {
            color: #DB2777;
        }
        p, span {
            color: #374151;
            font-weight: 500;
        }
        #points {
            font-size: 1.5em;
            color: #FF69B4;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }
        section, header {
            animation: fadeIn 0.5s ease-out;
        }
        @media (max-width: 600px) {
            h1 { font-size: 1.8em; }
            button { padding: 10px 20px; font-size: 0.9em; }
            section { padding: 15px; }
        }
    </style>
</head>
<body>
    <header>
        <h1>iStudio: –ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Å—è!</h1>
        <p>–í–∞—à–∏ –±–∞–ª–ª—ã: <span id="points">0</span></p>
    </header>

    <section id="referral">
        <h2>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</h2>
        <p>–ü—Ä–∏–≥–ª–∞—à–∞–π—Ç–µ –¥—Ä—É–∑–µ–π –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ 200 –±–∞–ª–ª–æ–≤ –∑–∞ –∫–∞–∂–¥–æ–≥–æ (–º–∞–∫—Å–∏–º—É–º 5 –¥—Ä—É–∑–µ–π).</p>
        <p>–í–∞—à–∞ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞: <span id="refLink"></span></p>
        <button onclick="shareRef()">–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π</button>
        <p>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π: <span id="refCount">0</span></p>
    </section>

    <section id="shop">
        <h2>üéÅ –ü—Ä–∏–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞</h2>
        <div class="prize">
            <p>300 –±–∞–ª–ª–æ–≤ ‚Äî –ß–µ—Ö–æ–ª –¥–ª—è iPhone</p>
            <button onclick="buyPrize('–ß–µ—Ö–æ–ª –¥–ª—è iPhone', 300)">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="prize">
            <p>500 –±–∞–ª–ª–æ–≤ ‚Äî –ù–∞—É—à–Ω–∏–∫–∏ EarPods</p>
            <button onclick="buyPrize('–ù–∞—É—à–Ω–∏–∫–∏ EarPods', 500)">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="prize">
            <p>1000 –±–∞–ª–ª–æ–≤ ‚Äî –ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è –∑–∞—Ä—è–¥–∫–∞</p>
            <button onclick="buyPrize('–ë–µ—Å–ø—Ä–æ–≤–æ–¥–Ω–∞—è –∑–∞—Ä—è–¥–∫–∞', 1000)">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="prize">
            <p>2000 –±–∞–ª–ª–æ–≤ ‚Äî –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ 2000 —Ä—É–±–ª–µ–π</p>
            <button onclick="buyPrize('–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ 2000 —Ä—É–±–ª–µ–π', 2000)">–ö—É–ø–∏—Ç—å</button>
        </div>
        <div class="prize">
            <p>5000 –±–∞–ª–ª–æ–≤ ‚Äî AirPods Pro</p>
            <button onclick="buyPrize('AirPods Pro', 5000)">–ö—É–ø–∏—Ç—å</button>
        </div>
    </section>

    <section id="levels">
        <h2>–£—Ä–æ–≤–Ω–∏</h2>
        <button onclick="showLevel('level1')">üü¢ Level 1 ‚Äî –ù–æ–≤–∏—á–æ–∫</button>
        <button onclick="showLevel('level2')">üü° Level 2 ‚Äî –≠–Ω—Ç—É–∑–∏–∞—Å—Ç</button>
        <button onclick="showLevel('level3')">üîµ Level 3 ‚Äî –§–∞–Ω–∞—Ç iStudio</button>
        <button onclick="showLevel('level4')">üî¥ Level 4 ‚Äî –õ–µ–≥–µ–Ω–¥–∞</button>
        <button onclick="showLevel('s-rank')">üî¥ S-Rank ‚Äî –ò–∫–æ–Ω–∞</button>
        <button onclick="showMain()">–ù–∞–∑–∞–¥</button>

        <section id="level1" class="level">
            <h2>üü¢ Level 1 ‚Äî –ù–æ–≤–∏—á–æ–∫</h2>
            <div class="task">
                <p>–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ Telegram –∏ Instagram iStudio ‚Äî 50 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file1-1">
                <button onclick="submitTask('–ü–æ–¥–ø–∏—à–∏—Å—å –Ω–∞ Telegram –∏ Instagram iStudio', 50, '', 'file1-1')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–û—Ñ–æ—Ä–º–∏ –ø–æ–∫—É–ø–∫—É –Ω–∞ –ª—é–±—É—é —Å—É–º–º—É ‚Äî 100 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file1-2">
                <button onclick="submitTask('–û—Ñ–æ—Ä–º–∏ –ø–æ–∫—É–ø–∫—É –Ω–∞ –ª—é–±—É—é —Å—É–º–º—É', 100, '', 'file1-2')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–°–¥–µ–ª–∞–π —Ñ–æ—Ç–æ —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio –∏ –≤—ã–ª–æ–∂–∏ –≤ Instagram ‚Äî 80 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file1-3">
                <button onclick="submitTask('–°–¥–µ–ª–∞–π —Ñ–æ—Ç–æ —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio –∏ –≤—ã–ª–æ–∂–∏ –≤ Instagram', 80, '', 'file1-3')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <button onclick="showMain()">–ù–∞–∑–∞–¥</button>
        </section>

        <section id="level2" class="level">
            <h2>üü° Level 2 ‚Äî –≠–Ω—Ç—É–∑–∏–∞—Å—Ç</h2>
            <div class="task">
                <p>–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ (5 –º–∞–∫—Å–∏–º—É–º) ‚Äî 200 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file2-1">
                <button onclick="submitTask('–ü—Ä–∏–≥–ª–∞—Å–∏ –¥—Ä—É–≥–∞ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ', 200, '', 'file2-1')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–°–Ω–∏–º–∏ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio (–¥–æ 30 —Å–µ–∫) ‚Äî 150 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file2-2">
                <button onclick="submitTask('–°–Ω–∏–º–∏ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤–∏–¥–µ–æ —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio', 150, '', 'file2-2')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–û—Å—Ç–∞–≤—å –æ—Ç–∑—ã–≤ –Ω–∞ —Å–∞–π—Ç–µ iStudio ‚Äî 120 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file2-3">
                <button onclick="submitTask('–û—Å—Ç–∞–≤—å –æ—Ç–∑—ã–≤ –Ω–∞ —Å–∞–π—Ç–µ iStudio', 120, '', 'file2-3')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <button onclick="showMain()">–ù–∞–∑–∞–¥</button>
        </section>

        <section id="level3" class="level">
            <h2>üîµ Level 3 ‚Äî –§–∞–Ω–∞—Ç iStudio</h2>
            <div class="task">
                <p>–°–æ–∑–¥–∞–π Reels —Å –æ–±–∑–æ—Ä–æ–º iStudio (1000+ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤) ‚Äî 300 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file3-1">
                <button onclick="submitTask('–°–æ–∑–¥–∞–π Reels —Å –æ–±–∑–æ—Ä–æ–º iStudio', 300, '', 'file3-1')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–û—Ä–≥–∞–Ω–∏–∑—É–π –≤—Å—Ç—Ä–µ—á—É —Å –¥—Ä—É–∑—å—è–º–∏ –≤ iStudio (—Ñ–æ—Ç–æ–æ—Ç—á—ë—Ç) ‚Äî 250 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file3-2">
                <button onclick="submitTask('–û—Ä–≥–∞–Ω–∏–∑—É–π –≤—Å—Ç—Ä–µ—á—É —Å –¥—Ä—É–∑—å—è–º–∏ –≤ iStudio', 250, '', 'file3-2')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–ü—Ä–∏–≥–ª–∞—Å–∏ 3 –¥—Ä—É–≥–∞, –∫–æ—Ç–æ—Ä—ã–µ –∫—É–ø–∏–ª–∏ –≤ iStudio ‚Äî 400 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file3-3">
                <button onclick="submitTask('–ü—Ä–∏–≥–ª–∞—Å–∏ 3 –¥—Ä—É–≥–∞, –∫–æ—Ç–æ—Ä—ã–µ –∫—É–ø–∏–ª–∏ –≤ iStudio', 400, '', 'file3-3')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <button onclick="showMain()">–ù–∞–∑–∞–¥</button>
        </section>

        <section id="level4" class="level">
            <h2>üî¥ Level 4 ‚Äî –õ–µ–≥–µ–Ω–¥–∞</h2>
            <div class="task">
                <p>–°–Ω–∏–º–∏ –≤–∏—Ä—É—Å–Ω–æ–µ –≤–∏–¥–µ–æ —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio (10k+ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤) ‚Äî 1000 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file4-1">
                <button onclick="submitTask('–°–Ω–∏–º–∏ –≤–∏—Ä—É—Å–Ω–æ–µ –≤–∏–¥–µ–æ —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio', 1000, '', 'file4-1')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–û—Ä–≥–∞–Ω–∏–∑—É–π —Ñ–ª–µ—à–º–æ–± –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É iStudio (–≤–∏–¥–µ–æ) ‚Äî 800 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file4-2">
                <button onclick="submitTask('–û—Ä–≥–∞–Ω–∏–∑—É–π —Ñ–ª–µ—à–º–æ–± –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É iStudio', 800, '', 'file4-2')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–ü—Ä–æ–≤–µ–¥–∏ —Å—Ç—Ä–∏–º —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio (1 —á–∞—Å) ‚Äî 600 –±–∞–ª–ª–æ–≤</p>
                <input type="file" id="file4-3">
                <button onclick="submitTask('–ü—Ä–æ–≤–µ–¥–∏ —Å—Ç—Ä–∏–º —Å –ø—Ä–æ–¥—É–∫—Ç–æ–º iStudio', 600, '', 'file4-3')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <button onclick="showMain()">–ù–∞–∑–∞–¥</button>
        </section>

        <section id="s-rank" class="level">
            <h2>üî¥ S-Rank ‚Äî –ò–∫–æ–Ω–∞</h2>
            <div class="task">
                <p>–î–æ—Å—Ç–∏—á—å 1M –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ —É–ø–æ–º—è–Ω—É—Ç—å iStudio ‚Äî –ø–æ–∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</p>
                <input type="file" id="file5-1">
                <button onclick="submitTask('–î–æ—Å—Ç–∏—á—å 1M –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ —É–ø–æ–º—è–Ω—É—Ç—å iStudio', 0, '–ø–æ–∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç', 'file5-1')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <div class="task">
                <p>–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–ª–ª–∞–± —Å –±–ª–æ–≥–µ—Ä–æ–º (100k+ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤) ‚Äî 5 –ª–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫</p>
                <input type="file" id="file5-2">
                <button onclick="submitTask('–û—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∫–æ–ª–ª–∞–± —Å –±–ª–æ–≥–µ—Ä–æ–º', 0, '5 –ª–µ—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫', 'file5-2')">–ü—Ä–∏–ª–æ–∂–∏—Ç—å —Ñ–∞–π–ª</button>
            </div>
            <button onclick="showMain()">–ù–∞–∑–∞–¥</button>
        </section>
    </section>

    <script>
        const tg = window.Telegram.WebApp;
        tg.ready();
        const user = tg.initDataUnsafe.user;
        const userId = user ? user.id : 'test_user';
        let points = 0;
        let refCount = 0;

        // –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–ª–æ–≤ —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        async function loadPoints() {
            const response = await fetch(`/get_points?userId=${userId}`);
            const data = await response.json();
            points = data.points || 0;
            document.getElementById('points').innerText = points;
        }

        loadPoints();  // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∞–ª–ª—ã –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
        document.getElementById('refLink').innerText = `https://t.me/istudio_bot?start=ref_${userId}`;
        document.getElementById('refCount').innerText = refCount;

        // –ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Ä–µ—Ñ. —Å—Å—ã–ª–∫–æ–π
        function shareRef() {
            tg.shareUrl(document.getElementById('refLink').innerText, '–ü—Ä–∏–≥–ª–∞—à–∞—é –≤ iStudio!');
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–¥–∞–Ω–∏—è
        function submitTask(taskName, pointsValue, prize, fileId) {
            const fileInput = document.getElementById(fileId);
            fileInput.onchange = () => {
                if (fileInput.files[0]) {
                    const formData = new FormData();
                    formData.append('userId', userId);
                    formData.append('taskName', taskName);
                    formData.append('pointsValue', pointsValue);
                    formData.append('prize', prize);
                    formData.append('file', fileInput.files[0]);

                    fetch('/submit', { method: 'POST', body: formData })
                        .then(res => res.json())
                        .then(data => {
                            alert(data.message);
                            if (data.status === 'pending') loadPoints();  // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–ª—ã —Å —Å–µ—Ä–≤–µ—Ä–∞
                        })
                        .catch(err => alert('–û—à–∏–±–∫–∞: ' + err));
                }
            };
            fileInput.click();
        }

        // –ü–æ–∫—É–ø–∫–∞ –ø—Ä–∏–∑–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –∏ –≤—ã—á–∏—Ç–∞–Ω–∏–µ–º –±–∞–ª–ª–æ–≤
        function buyPrize(prizeName, cost) {
            if (points < cost) return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–ª–æ–≤!');
            fetch('/purchase', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ userId, prizeName, cost })
            })
                .then(res => res.json())
                .then(data => {
                    alert(data.message);
                    if (data.status === 'pending') loadPoints();  // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–ª—ã —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏
                })
                .catch(err => alert('–û—à–∏–±–∫–∞: ' + err));
        }

        // –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —É—Ä–æ–≤–Ω—è–º
        function showLevel(levelId) {
            document.querySelectorAll('.level').forEach(el => el.classList.remove('show'));
            document.getElementById(levelId).classList.add('show');
        }
        function showMain() {
            document.querySelectorAll('.level').forEach(el => el.classList.remove('show'));
        }
    </script>
</body>
</html>
